#!/usr/bin/env python3

import os, sys, shutil, configparser
import gettext

if __name__ == "__main__":
    config_file = "config.ini"
    if not os.path.isfile("config.ini"):
        config_file = "config_default.ini"
    config = configparser.ConfigParser()
    try:
        config.read(config_file)
    except Exception as e:
        print("Error reading configuration data.")
        print(str(e))
        sys.exit()

    lang = config["language"]["default"]
    language = gettext.translation('base', localedir='po', languages=[lang])
    language.install()

    if "--cli" in sys.argv:
        from cli.cli import command_line_interface
        command_line_interface(config)
    else:
        from gtk3.application import Application
        app = Application(config=config)
        app.run(sys.argv)
